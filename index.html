<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ChatAI Bob PRO 2026</title>

<style>
body{font-family:system-ui;background:#f4f6f8;margin:0;padding:12px}
h2{text-align:center}
textarea,select,button,input{width:100%;max-width:600px;margin:8px auto;display:block;font-size:16px}
textarea{height:90px;padding:10px}
button{padding:12px;background:#007bff;color:#fff;border:none;border-radius:6px}
#output,#imgResult{background:#fff;padding:10px;border-radius:6px;max-width:600px;margin:10px auto;white-space:pre-wrap}
footer{text-align:center;font-size:13px;opacity:.6;margin-top:20px}
</style>
</head>

<body>

<h2>ğŸ‡²ğŸ‡¦ ChatAI Bob PRO 2026</h2>

<input type="file" id="imgInput" accept="image/*">
<button onclick="analyzeImage()">ğŸ–¼ï¸ Analizza foto</button>
<div id="imgResult">ğŸ“· Nessuna immagine analizzata.</div>

<select id="langMode">
<option value="auto">ğŸŒ AUTO</option>
<option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
<option value="ar">ğŸ‡¸ğŸ‡¦ Arabic</option>
<option value="ary">ğŸ‡²ğŸ‡¦ Darija</option>
<option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
<option value="en">ğŸ‡¬ğŸ‡§ English</option>
</select>

<textarea id="userText" placeholder="Scrivi come vuoi..."></textarea>
<button onclick="sendMessage()">ğŸš€ Invia</button>

<div id="output">â³ Pronto.</div>

<footer>Â© 2025 ChatAI Bob PRO</footer>

<script>
const GROQ_PROXY_URL = "https://groq-proxy-worker.bouabidmoukhlis.workers.dev";

function looksArabic(t){return /[\u0600-\u06FF]/.test(t);}
function looksDarija(t){
return ["Ø´Ù†Ùˆ","ÙˆØ§Ø´","Ø¨Ø²Ø§Ù","Ø¯Ø§Ø¨Ø§","ÙÙŠÙ†","Ø¹Ø§ÙØ§Ùƒ","Ù…Ø²ÙŠØ§Ù†","Ù‡Ø§Ø¯","Ø¯ÙŠØ§Ù„","Ø¨ØºÙŠØª"]
.some(w=>t.includes(w));
}

function systemPrompt(t){
const m=document.getElementById("langMode").value;
if(m!=="auto") return "Reply only in "+m;
if(looksDarija(t)) return "Reply in Moroccan Darija.";
if(looksArabic(t)) return "Reply in Arabic.";
return "Reply in the same language as the user.";
}

async function sendMessage(){
const t=userText.value.trim();
if(!t)return;
output.textContent="â³ Attendi...";
const r=await fetch(GROQ_PROXY_URL,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
model:"llama-3.3-70b-versatile",
messages:[
{role:"system",content:systemPrompt(t)},
{role:"user",content:t}
],
max_tokens:500
})
});
const d=await r.json();
output.textContent=d.choices?.[0]?.message?.content || "âŒ Nessuna risposta";
}

async function analyzeImage(){
const f=imgInput.files[0];
if(!f){imgResult.textContent="âŒ Seleziona una foto";return;}
imgResult.textContent="â³ Analisi...";
const b=await new Promise(r=>{
const fr=new FileReader();
fr.onload=()=>r(fr.result);
fr.readAsDataURL(f);
});
const r=await fetch(GROQ_PROXY_URL,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
model:"llama-3.2-90b-vision-preview",
messages:[{
role:"user",
content:[
{type:"text",text:"Analizza questa immagine"},
{type:"image_url",image_url:{url:b}}
]
}],
max_tokens:300
})
});
const d=await r.json();
imgResult.textContent=d.choices?.[0]?.message?.content || "âŒ Nessuna risposta";
}
</script>

</body>
</html>
